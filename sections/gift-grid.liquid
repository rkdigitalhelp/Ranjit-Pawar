{% comment %}
  Gift Guide Grid (NEW)
  - 6 selectable products
  - Per product, set hotspot X/Y (%) so the + sits on the actual item (jacket, etc.)
{% endcomment %}

{{ 'gift.css' | asset_url | stylesheet_tag }}
<script src="{{ 'gift.js' | asset_url }}" defer></script>

<section class="gift-container" aria-label="Tisso vison in the wild">
  {% if section.settings.heading != blank %}
    <h2 style="font-size:28px;font-weight:700;margin:24px 0 12px;">{{ section.settings.heading }}</h2>
  {% endif %}

  <div class="gift-grid">
    {% for block in section.blocks %}
      {% assign p = block.settings.product %}
      <div class="gift-card" {{ block.shopify_attributes }}>
        {% if p %}
          <img src="{{ p.featured_image | image_url: width: 960 }}" alt="{{ p.title | escape }}" loading="lazy">
          {% assign left = block.settings.x_percent | default: 85 %}
          {% assign top  = block.settings.y_percent | default: 15 %}
          <button
            class="gift-hotspot"
            aria-label="Quick view {{ p.title }}"
            data-quickview-handle="{{ p.handle }}"
            data-jacket-handle="{{ section.settings.jacket_product | default: section.settings.jacket_handle_fallback }}"
            style="left: {{ left }}%; top: {{ top }}%;">
          </button>
        {% else %}
          <div style="aspect-ratio:1/1;display:grid;place-items:center;color:#777;">Select a product</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Gift Guide Grid (NEW)",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Tisso vison in the wild" },
    { "type": "product", "id": "jacket_product", "label": "Soft Winter Jacket (auto-add target)" },
    { "type": "text", "id": "jacket_handle_fallback", "label": "Fallback handle", "default": "soft-winter-jacket" }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "limit": 6,
      "settings": [
        { "type": "product", "id": "product", "label": "Product" },
        { "type": "range", "id": "x_percent", "label": "Hotspot X position (%)", "min": 0, "max": 100, "step": 1, "default": 85 },
        { "type": "range", "id": "y_percent", "label": "Hotspot Y position (%)", "min": 0, "max": 100, "step": 1, "default": 15 }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [{ "name": "Gift Guide Grid (NEW)" }]
}
{% endschema %}
